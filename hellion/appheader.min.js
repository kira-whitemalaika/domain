ux.eldorado=ux.eldorado||{},ux.eldorado.jQuery=ux.jQuery,ux.eldorado.delegationUI=function(a,b,c,d){function e(a,b,c,d){if(c&&b&&0!==a.length){var e,f=a.find(".acct-delegate-text"),g="undefined"!=typeof c.displayName;f.data("template")||f.data("template",f.html()),e=f.data("template"),g&&e.indexOf("{2}")<e.indexOf("{1}")&&(e=e.replace(/(\{2\},? ?)\{/,"{")),f.html(e.replace("{0}",b.displayName?b.displayName:b.firstName).replace("{1}",g?c.displayName:c.firstName).replace("{2}",g?"":c.lastName)),f[d===!0?"addClass":"removeClass"]("refreshed"),a.show()}}function f(b,c,d,f){var h=a("#uxh-acct-delegate");if(0!==h.length)if("customer c3 both".indexOf(b)>-1){var i="both customer".indexOf(b)>-1?"-cust":"-rep";e(h.find(".delegate"+i),c,d,f),"both".indexOf(b)>-1&&(e(h.find(".delegate-rep"),c.del,c,f),h.addClass("delegate-db-shim")),"-rep"===i&&g(d),h.show()}else h.hide()}function g(a){var b=window.document.title,c=b.indexOf("]");b=c>-1?b.substr(c+2):b,window.document.title="["+a.shopperId+"] "+b}function h(){m===!0&&d.turnOffTabFocusCheck(),d.turnOnTabFocusCheck({callback:function(a,b,c,d){l&&f(a,b,c,d)}}),m=!0}function i(){a("#exit-delegation-link").on("click",function(){var b=a(this),c=a('<form id="del-switchback" method="POST" style="display:none;"><input type="hidden" name="secret" /></form>').appendTo(document.body);c.attr("action",b.attr("data-action")),c.find("input").attr("value",b.attr("data-sk")),c.submit()})}function j(a,b,c){var e=ux.eldorado.delegationUI;c=c||function(){e.initBars(!0),e.initTabFocusAuth(),e.initHeader()},d.init(a,b,c)}function k(a){l=!(a===!1),f(d.delegationType(),d.delegateInfo(),d.customerInfo()),l===!0&&h(),i()}var l=!0,m=!1;return{init:j,initBars:k,initTabFocusAuth:function(){h()},initHeader:function(){"customer c3 both".indexOf(d.delegationType())>-1&&a(".uxh-no-delegate").hide()}}}(jQuery,ux.i18n.header,ux.util,ux.acctDelegation),ux.eldorado.thirdParty=function(a,b){function c(a){!a||!a.js||ux.disable&&ux.disable.tealium===!0||b.load.script({url:a.js,preLoad:function(){var a=window;a.utag_data=a.utag_data||{},a.utag_data.pl_id=ux.eldorado.data.plId,a.utag_data.shopper_id=ux.eldorado.data.shopperId,a.utag_data.app_name=ux.eldorado.data.app,_.extend(a.utag_data,ux.utagconfig)}})}function d(c){c&&c.js&&c.css&&(!ux.disable||ux.disable.livePerson!==!0)&&b.load.files([{typ:"script",url:c.js,preLoad:function(){a("body").append(a('<div id="lpButtonDiv"></div>'))},when:"documentReady"},{typ:"css",url:c.css,when:"documentReady"}])}function e(a){ux.disable&&ux.disable.ga===!0||b.load.script({url:"//www.googletagmanager.com/gtm.js?id="+a+"&l=_gaDataLayer",preLoad:function(){var a=window,b="_gaDataLayer";a[b]=a[b]||[],a[b].push({"gtm.start":(new Date).getTime(),event:"gtm.js"})},attrs:{async:!0},anchor:document.getElementsByTagName("script")[0],where:"before"})}function f(a){if(!ux.disable||ux.disable.ga!==!0){var b=window,c=_.union(a.data,ux.gaconfig||[]);b._gaDataLayer=b._gaDataLayer||[];for(var d=0,e=c.length;e>d;d++)b._gaDataLayer.push(c[d]);b._gaq=b._gaq||[],b._gaq.push(["_setDomainName",a.domain])}}return{initTealium:c,initLivePerson:d,initGATagManager:e,configGATagManager:f}}(jQuery,ux.util),ux.eldorado.header=function(a,b,c,d,e){function f(b,c,e,f){var i={},j="";w&&(i.shopper_id=c,i.mstk=e,j="shopper_id="+c+"&mstk="+e),f&&(i.prog_id=f,j+=(j.length>0?"&":"")+"prog_id="+f);var k=b+"/pcjson/applicationheader/";a.ajax({contentType:"text/javascript; charset=utf-8",dataType:"jsonp",url:k,data:i,success:function(b){null!=b&&b.shopperid&&b.shopperid.length>0?(t=b.shopperid,g(a.extend(!0,{},x,b)),"string"==typeof e&&e.length>0||d.init(b,k+(j.length>0?"?":"")+j)):h(!1)},error:function(){h(!1)}})}function g(b){var c="partial full manager".indexOf(b.status)>-1;h(c),c&&(i(b),j(b),a("#uxh-s-header")[y.shopperInfo||y.shopperIcons?"show":"hide"](),k(b)),l(b)}function h(b){a("#uxh-nav-product")[b?"addClass":"removeClass"]("uxh-m-logged-in"),a(".uxh-logged-out")[b?"hide":"show"](),a(".uxh-logged-in")[b?"show":"hide"]()}function i(b){var c=!1,d=b.name;d.length<=0&&(d=b.username),d.length<=0&&(d=b.shopperid,c=!0),u=d,a("#uxh-s-name-prefix")[c?"show":"hide"](),d.length>0&&a("#uxh-s-name").html(d),b.fullname.length>0&&!c&&a("#uxh-s-fullname").text(b.fullname).show(),b.shopperid.length>0&&!c&&(a("#uxh-s-id").text(b.shopperid||""),a("#uxh-mi-custid").show()),b.mgrid.length>0&&b.mgrname.length>0&&(a("#uxh-mgr-id").text(b.mgrid||""),a("#uxh-mgr-name").text(b.mgrname||""),a("#uxh-mi-mgrid").show(),a("#uxh-mi-mgrname").show()),a("#uxh-nav-cart").length>0&&a("#uxh-nav-cart .uxh-cart-count").text(b.carttotal),y.shopperInfo=!c}function j(b){var c=!1;if(a("#uxh-s-status").empty(),b.pricetypes&&b.pricetypes.length>0){c=!0;for(var d=0,e=b.pricetypes.length;e>d;d++)a("#uxh-s-status").append(a("<span></span>").addClass("uxc-pt-icon uxc-pt-icon-"+b.pricetypes[d]))}b.vip&&(c=!0,a("#uxh-s-status").append(a("<span></span>").addClass("uxc-pt-icon uxc-pt-icon-vip")),a("#uxh-vip-info").show(),a("#uxh-vip-phone").text(b.vip.phone),a("#uxh-vip-email").attr("href","mailto:"+b.vip.email).text(b.vip.email),a("#uxh-vip-repname").text(b.vip.repname)),a("#uxh-s-status")[c?"show":"hide"](),y.shopperIcons=c}function k(b){y.productsMenu=v;var c=!1,d=a("#uxh-s-products");if(0!==d.length){var e=d.prev("a");if("true"!==d.attr("data-showops").toLowerCase()&&d.empty(),b.products&&b.products.length>0){var f=!1;for(var g in b.products){var h=b.products[g];h.key!==s?d.append(a("<li>").append(a("<a />").attr({role:"menuitem",href:h.url}).text(h.name))):(0===a("#uxh-product").text().length&&a("#uxh-product").text(h.name),f=!0)}a("#uxh-s-productsmenu")[f?"show":"hide"](),y.productsMenu=c}c=v&&d.children().length>0,a("#uxh-products-arrow")[c?"show":"hide"](),d[c?"attr":"removeAttr"]("role","menu"),d[c?"addClass":"removeClass"]("dropdown-menu"),e[c?"attr":"removeAttr"]("data-toggle","dropdown"),e[c?"addClass":"removeClass"]("dropdown-toggle")}}function l(){var b=a("#uxh-i-server").text();a("#uxh-i-server")[b.length>0&&b.indexOf("{{")<=-1?"show":"hide"]()}function m(){var b=a("#uxh-nav-app-menu").find("li.active > a").filter(":last").text();a("#uxh-nav-app-caption").text(""==b?a("#uxh-nav-app-active").attr("data-default-caption"):b)}function n(){a("#uxh-nav-product").text(a("#uxh-product").text())}function o(){a("#uxh-nav-app-active").css("display",0===a("#uxh-nav-app-menu").find("li").length?"none":"")}function p(){a("#uxh-nav-app")[a("#uxh-nav-app-menu").find("li").length<2&&a("#uxh-nav-app").find(".navbar-nav").length<2?"addClass":"removeClass"]("navbar-nav-single-li")}function q(){a("#uxh-nav-collapse").on("show.bs.collapse",function(){a("#uxh-nav-app-collapse.in").collapse("hide"),a("[data-target=#uxh-nav-app-collapse]").addClass("collapsed")}),a("#uxh-nav-app-collapse").on("show.bs.collapse",function(){a("#uxh-nav-collapse.in").collapse("hide"),a("[data-target=#uxh-nav-collapse]").addClass("collapsed")})}function r(){function a(a){_.isFunction(a)&&a()}var b=ux.eldorado.fns;_.isArray(b)&&_(b.length).times(function(){a(b.pop())}),ux.eldorado.ready=a,delete ux.eldorado.fns}var s,t,u,v=!0,w=!1,x={name:"",username:"",fullname:"",shopperid:"",carttotal:0,mgrid:"",mgrname:""},y={shopperInfo:!0,shopperIcons:!0,ProductsMenu:!0};return{load:function(b,d,g,h,i){s=d;var j=!g||g.indexOf("pc:shopperid")>-1?e:g,k=!h||h.indexOf("pc:mstk")>-1?e:h;w="undefined"!=typeof j&&"undefined"!=typeof k,a(document).ready(function(){a("#uxh").length>0&&(f(b,j,k,i),q(),c.bs.breakpoints.onXS(function(){o(),p(),m(),n()}))}),ux.eldorado.thirdParty.initTealium(ux.eldorado.data.thirdParty.tealium),r()},populateActiveMenuCaption:m,populateProductCaption:n}}(jQuery,ux.i18n.header,ux.util,ux.eldorado.delegationUI);